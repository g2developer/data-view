/**
 * data-view.20180308.min.js
 * ISCÂ license
 * Copyright (c) 2018 data-view (http://dataview.tistory.com)
 */
var ATTR_DATA_VIEW="data-view",ATTR_DATA_LIST="data-list",ATTR_NO_DATA_VIEW="no-data-view";function DataView(t){this.dataViewItems=[],this.initializing=!1,this.initialized=!1,this.changing=!1,this.createGlobalItems=!0,this.config(t)}function DataViewItem(t){for(var e in t)this[e]=t[e]}function escapeToNormalChar(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function clone(t){if(!t)return t;if(Array.isArray(t)){for(var e=[],a=0;a<t.length;a++)e[a]=t[a];return e}return t}function _dvinit(t){if(document.body&&!dataview.initializing&&!dataview.initialized){var e=document.querySelector("script[src*='data-view']").getAttribute("src"),a=(e.indexOf("no-init"),{});if(-1!=e.indexOf("?")){var i=e.substring(e.indexOf("?")+1);if(0<i.length){a={};for(var r=i.split("&"),n=null,o=0;o<r.length;o++)2==(n=r[o].split("=")).length&&(a[n[0]]=n[1])}}dataview.config(a),dataview.initDataView(),document.removeEventListener("DOMNodeInserted",_dvinit),document.removeEventListener("DOMContentLoaded",_dvinit)}}DataView.prototype.config=function(t){return t&&(t.attr&&(ATTR_DATA_VIEW=t.attr),t.listAttr&&(ATTR_DATA_LIST=t.listAttr),t.noDataAttr&&(ATTR_NO_DATA_VIEW=t.noDataAttr),this.createGlobalItems=!t.hasOwnProperty("createGlobalItems")||t.createGlobalItems,this.refenceData=!!t.hasOwnProperty("refenceData")&&t.refenceData),this},DataView.prototype.initDataView=function(t){this.initializing=!0;for(var e=this.dataViewItems.length-1;0<=e;e--)this.dataViewItems[e].scope==t&&this.dataViewItems.pop();var a=this.findDataViewList(t),i=this.addDataViewList(a,t);for(e=0;e<i.length;e++)i[e].type==ATTR_DATA_VIEW?this.change(i[e].id,{}):this.change(i[e].id,[]);this.initializing=!1,this.initialized=!0},DataView.prototype.findDataViewList=function(t){return t||(t=document),jQuery("["+ATTR_DATA_VIEW+"], ["+ATTR_DATA_LIST+"]",t)},DataView.prototype.addDataViewList=function(targetList,scope){if(targetList){for(var dvId,dvType,dvItem=null,newArr=[],i=0;i<targetList.length;i++)if(dvId=this.getDataViewId(targetList[i]),dvType=jQuery(targetList[i]).attr(ATTR_DATA_VIEW)?ATTR_DATA_VIEW:ATTR_DATA_LIST,dvId){var selector=null;jQuery(targetList[i]).attr(ATTR_DATA_VIEW)?selector="["+ATTR_DATA_VIEW+"="+dvId+"]":jQuery(targetList[i]).attr(ATTR_DATA_LIST)?selector="["+ATTR_DATA_LIST+"="+dvId+"]":jQuery(targetList[i]).attr("id")&&(selector="#"+dvId);var noDvElement=jQuery("["+ATTR_NO_DATA_VIEW+"="+dvId+"]"),noDvElementHTML=noDvElement[0]?noDvElement[0].outerHTML:"";if(dvItem=new DataViewItem({id:dvId,type:dvType,selector:selector,template:targetList[i].outerHTML,element:targetList[i],parent:jQuery(targetList[i]).parent(),noDataView:noDvElement,noDataViewHTML:noDvElementHTML,scope:scope}),newArr.push(dvItem),this.createGlobalItems)try{var v=eval(dvId);for(var k in dvItem)v[k]=vtemp[k]}catch(e){eval(dvId+"=dvItem;")}}else console.error("[dataview] Not found data-view attribute value or tag id");return 0<newArr.length&&(this.dataViewItems=this.dataViewItems.concat(newArr)),newArr}},DataView.prototype.getDataViewId=function(t){return jQuery(t).attr(ATTR_DATA_VIEW)||jQuery(t).attr(ATTR_DATA_LIST)||jQuery(t).attr("id")},DataView.prototype.getDataViewItem=function(t){if(t){for(var e=null,a=0;a<this.dataViewItems.length;a++)if(this.dataViewItems[a].id==t){e=this.dataViewItems[a];break}if(e)return e;console.error("[dataview] not found dataview item : "+t)}else console.error("[dataview] dataViewId is required parameter getDataViewItem function : "+t)},DataView.prototype.getDataViewSelector=function(t){return this.getDataViewItem(t).selector},DataView.prototype.getDataViewElement=function(t){var e=jQuery(t.selector,t.parent);return e&&0!=e.length||((e=jQuery(t.selector))||0<e.length)&&(t.parent=e.parent()),e},DataView.prototype.getDataViewHtml=function(t,e){var a=this.getDataViewItem(t);if(!a)return"";var i=a.template;return this.mergeHtmlData(i,e)},DataView.prototype.getDataViewListHtml=function(t,e){var a=this.getDataViewItem(t);if(!a||!e)return"";for(var i=a.template,r="",n=0;n<e.length;n++)r+=this.mergeHtmlData(i,e[n]);return r},DataView.prototype.mergeHtmlData=function(t,e){if(!e||!t)return"";for(var a=this.getSyntaxList(t)||[],i="",r=0;r<a.length;r++)i=this.mergeData(a[r],e),t=t.replace(a[r],i);return t=this.mergeIfStateHtmlData(t,e)},DataView.prototype.mergeData=function(tmp,data){var o=tmp;tmp=escapeToNormalChar(tmp),tmp=this.mergeGlobal(tmp),tmp=this.mergeNormalVar(tmp,data);try{tmp=eval(tmp)}catch(t){tmp=""}return null!=tmp&&null!=tmp&&"null"!=tmp&&"undefined"!=tmp||(tmp=""),tmp},DataView.prototype.getSyntaxList=function(t){return t.match(/\{\{[^\{\{\}\}]*\}\}/g)},DataView.prototype.mergeNormalVar=function(t,e){var a=t,i=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/\'[^\']*\'/g,"")).replace(/\"[^\"]*\"/g,"")).replace(/^\w\d+\.?\d*/g,"")).replace(/\w+(\.\w+)* *\(/g,"")).replace(/null/g,"")).replace(/true/g,"")).replace(/false/g,"")).replace(/undefined/g,"")).match(/\w+(\.\w+)*/g);if(null==i)return t;for(var r=0;r<i.length;r++){var n=this.getDataOfKey(e,i[r]);isNaN(n)&&"string"==typeof n&&(n="'"+n+"'"),t=t.replace(i[r],n)}return t},DataView.prototype.mergeGlobal=function(html){var rg=/@\w+(\.\w+)*/g,match=html.match(rg);if(null==match)return html;for(var i=0;i<match.length;i++){var gVar=match[i],value=eval(gVar.substr(1));value&&"string"==typeof value&&"null"!=value&&"undefined"!=value&&(value="'"+value+"'"),html=html.replace(new RegExp(gVar,"g"),value)}return html},DataView.prototype.mergeIfStateHtmlData=function(t,e){for(var a=/\{( *\(.+\) *\{\s*([^\}]*\s*)*\}\s*)+(.*\{\s*([^\}]*\s*)*\}\s*)*\}/g;a.test(t);){for(var i=t.match(a)[0],r=i.match(/\{\s*[^\{\}]+\s*\}/g),n=i.match(/\{ *\([^\(\)]*\)/g),o="",l=0;l<n.length;l++){var s=n[l].replace(/\{/,"");if(this.mergeData(s,e)){o=r[l];break}}!o&&r.length>n.length&&(o=r[r.length-1]),o&&(o=o.substring(1,o.length-2)),t=t.replace(i,o)}return t},DataView.prototype.getDataOfKey=function(t,e){var a=this.getLiteral(e);if(null==a||null==a)if(2<=(e=e.replace(/ /g,"")).split(".").length){var i=e.split("."),r=t;try{for(var n=0;n<i.length;n++)r=r[i[n]]}catch(t){r=""}a=r}else a=t[e];return a},DataView.prototype.getLiteral=function(t){if(!t)return t;var e="";if(/ *\'.*\' */.test(t))e=t.substring(t.indexOf("'")+1,t.lastIndexOf("'"));else if(/ *\".*\" */.test(t))e=t.substring(t.indexOf('"')+1,t.lastIndexOf('"'));else{if(isNaN(t)&&1!=t&&0!=t)return null;e=t}return e},DataView.prototype.getNotLiteralArr=function(t){for(var e=t.replace(/\'[^\']*\'/g," ").replace(/\"[^\"]*\"/g," ").match(/\w+(\.\w+)*/g)||[],a=e.length;0<=a;a--)isNaN(e[a])&&"true"!=e[a]&&"false"!=e[a]?-1!=["amp","lt","gt","typeof","instanceof"].indexOf(e[a])&&e.splice(a,1):e.splice(a,1);return e},DataView.prototype.showNoDataView=function(t){var e=jQuery("["+ATTR_NO_DATA_VIEW+"="+t.id+"]");t.data&&0!=t.data.length?e&&e.hide():e.html()?e.show():t.noDataViewHTML&&t.parent&&0<t.parent.length&&jQuery(t.noDataViewHTML).appendTo(t.parent)},DataView.prototype.change=function(t,e){var a=this.getDataViewItem(t),i=this.getDataViewElement(a),r="";if(this.refenceData||(e=clone(e)),a.type==ATTR_DATA_LIST){if(e)a.data=Array.isArray(e)?e:[e];else if(this.refenceData)for(var n=a.data.length-1;0<=n;n--)a.data.pop();else a.data=e;r=this.getDataViewListHtml(t,e)}else a.data=e,r=this.getDataViewHtml(t,e);if(this.changing=!0,1<i.length)for(n=i.length-1;0<n;n--)i.eq(n).remove();r&&""!=r?i.replaceWith(r):(i.hide(),i.html("")),a.element=this.getDataViewElement(a),this.showNoDataView(a),this.changing=!1},DataView.prototype.append=function(t,e){if(e){var a=this.getDataViewItem(t),i=this.getDataViewElement(a);if(a.data)if(Array.isArray(a.data))if(Array.isArray(e))for(var r=0;r<e.length;r++)a.data.push(e[r]);else a.data.push(e);else if(Array.isArray(e)){var n=clone(e);n.unshift(a.data),a.data=n}else a.data=[a.data,e];else a.data=this.refenceData?e:clone(e);var o="";o=Array.isArray(e)?this.getDataViewListHtml(t,e):this.getDataViewHtml(t,e),this.changing=!0,i.last().after(o);var l=i.first();l.is(":visible")||l.remove(),a.element=this.getDataViewElement(a),this.showNoDataView(a),this.changing=!1}},DataView.prototype.prepend=function(t,e){if(e){var a=this.getDataViewItem(t),i=this.getDataViewElement(a);if(a.data)if(Array.isArray(a.data))if(Array.isArray(e))for(var r=0;r<e.length;r++)a.data.unshift(e[r]);else a.data.unshift(e);else if(Array.isArray(e)){var n=clone(e);n.push(a.data),a.data=n}else a.data=[e,a.data];else a.data=this.refenceData?e:clone(e);var o="";o=Array.isArray(e)?this.getDataViewListHtml(t,e):this.getDataViewHtml(t,e),this.changing=!0,i.first().before(o);var l=i.last();l.is(":visible")||l.remove(),a.element=this.getDataViewElement(a),this.showNoDataView(a),this.changing=!1}},DataView.prototype.update=function(t,e,a){var i=this.getDataViewItem(t);if(i.data&&!(i.data.length<e)){var r=this.getDataViewElement(i).eq(e);if(r.is(":visible")){i.data[e]=a;var n=this.getDataViewHtml(t,a);this.changing=!0,r.replaceWith(n),i.element=this.getDataViewElement(i),this.changing=!1}}},DataView.prototype.remove=function(t,e){var a=this.getDataViewItem(t);if(a.data&&!(a.data.length<e)){var i=this.getDataViewElement(a).eq(e);i.is(":visible")&&(a.data.splice(e,1),this.changing=!0,1<this.getDataViewElement(a).length?i.remove():(i.hide(),i.html("")),a.element=this.getDataViewElement(a),this.showNoDataView(a),this.changing=!1)}},DataView.prototype.blank=function(t){var e=this.getDataViewItem(t),a={};if((e.type==ATTR_DATA_LIST||Array.isArray(e.data))&&e.data){for(var i=0;i<e.data.length;i++)e.data[i]={};a=e.data}this.change(t,a)},DataView.prototype.clear=function(t){this.change(t,null)},DataView.prototype.loadAnd=function(t,n,o){jQuery.get(t,function(t){if(t=dataview.newDataViewHtml(t),n){this.changing=!0;var e=jQuery(n);if(o){var a=e.parent(),i=e.index();e.replaceWith(t),e=a.children().eq(i)}else e.html(t);var r=this.findDataViewList(e);dataview.refindParent(r),this.changing=!1}})},DataView.prototype.loadAndOverrideHtml=function(t,e){this.loadAnd(t,e,!0)},DataView.prototype.loadAndChangeHtml=function(t,e){this.loadAnd(t,e,!1)},DataView.prototype.newDataViewHtml=function(t){var e=this.findDataViewList(t);return e&&0!=e.length?(this.addDataViewList(e),this.mergeHtmlData(t,{})):t},DataView.prototype.refindParent=function(t){for(var e=0;e<t.length;e++){var a=this.getDataViewId(t[e]);if(a)for(var i=0;i<this.dataViewItems.length;i++)this.dataViewItems[i].id==a&&(this.dataViewItems[i].parent=jQuery(t[e]).parent())}},DataView.prototype.objToForm=function(t,e){var a=this.getDataViewSelector(t),i=document.querySelector(a),r=null;for(var n in e)if(e[n]&&(r=i.querySelector("[name="+n+"]")))if("radio"==r.type)try{i.querySelector("[name="+n+"][value="+e[n]+"]").checked=!0}catch(t){}else if("checkbox"==r.type){(l=Array.isArray(e[n])?e[n]:null)||"string"!=typeof e[n]||(l=e[n].split(","));for(var o=0;o<l.length;o++)try{(r=i.querySelector("[name="+n+"][value="+l[o]+"]"))&&(r.checked=!0)}catch(t){}}else if("select-multiple"==r.type){var l;(l=Array.isArray(e[n])?e[n]:null)||"string"!=typeof e[n]||(l=e[n].split(","));for(o=0;o<r.options.length;o++)try{var s=r.options[o].value||r.options[j].text;-1!=l.indexOf(s)&&(r.options[o].selected=!0)}catch(t){}}else try{r.value=e[n]}catch(t){}},DataView.prototype.formToObj=function(t){for(var e=this.getDataViewSelector(t),a=document.querySelector(e),i=a.querySelectorAll("input:enabled:not([type=button]):not([type=submit]):not([type=image]),select:enabled,textarea:enabled"),r={},n=0;n<i.length;n++)if(i[n].name){var o=i[n].name,l=i[n].value;if("radio"==i[n].type)i[n].checked&&(r[o]=l);else if("checkbox"==i[n].type)i[n].checked&&(r[o]?Array.isArray(r[i[n].name])?r[o].push(l):r[o]=[r[o],l]:1<a.querySelectorAll("input[name="+i[n].name+"]").length?r[o]=[l]:r[o]=l);else if("select-multiple"==i[n].type){r[o]=[];for(var s=0;s<i[n].options.length;s++)i[n].options[s].selected&&(l=i[n].options[s].value||i[n].options[s].text,r[o].push(l))}else r[o]=l}return r},DataView.prototype.clearForm=function(t){for(var e=this.getDataViewSelector(t),a=document.querySelector(e).querySelectorAll("input:enabled:not([type=button]):not([type=submit]):not([type=image]),select:enabled,textarea:enabled"),i=0;i<a.length;i++)a[i].name&&("radio"==a[i].type||"checkbox"==a[i].type?a[i].checked=!1:"color"==a[i].type?a[i].value="#000000":"select-one"==a[i].type?a[i].selectedIndex=0:a[i].value="")},DataView.prototype.form=function(t,e){return e?void this.objToForm(t,e):this.formToObj(t)},DataViewItem.prototype.change=function(t){dataview.change(this.id,t)},DataViewItem.prototype.append=function(t){dataview.append(this.id,t)},DataViewItem.prototype.prepend=function(t){dataview.prepend(this.id,t)},DataViewItem.prototype.update=function(t,e){dataview.update(this.id,t,e)},DataViewItem.prototype.remove=function(t){dataview.remove(this.id,t)},DataViewItem.prototype.clear=function(){dataview.clear(this.id)},DataViewItem.prototype.blank=function(){dataview.blank(this.id)},DataViewItem.prototype.objToForm=function(t){dataview.objToForm(this.id,t)},DataViewItem.prototype.formToObj=function(){return dataview.formToObj(this.id)},DataViewItem.prototype.clearForm=function(){dataview.clearForm(this.id)},DataViewItem.prototype.form=function(t){return dataview.form(this.id,t)},document.addEventListener("DOMContentLoaded",_dvinit,!1),document.addEventListener("DOMNodeInserted",_dvinit,!1);var dataview=new DataView;